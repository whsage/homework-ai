# 关键词高亮功能

## 功能说明

为了提升学生阅读 AI 辅导内容的效率，我们添加了**智能关键词高亮**功能。系统会自动识别并加粗重要的词汇，让学生能够快速抓住重点。

## 高亮的词汇类别

### 1. 数学相关概念
- **计算类**：速度、距离、时间、路程、行程
- **运算类**：加、减、乘、除、等于、计算、比较
- **数值类**：分数、小数、整数、平均、总共
- **几何类**：面积、周长、体积、长度、宽度、高度
- **其他**：公式、方程、解、答案、结果、单位、换算

### 2. 引导性动词
使用、代入、计算、比较、判断、分析、思考、注意、观察、理解、尝试、检查、验证、确认、推导、证明、对比

### 3. 逻辑连接词
首先、然后、接着、最后、因此、所以、如果、那么、关键、重点、核心、注意、步骤、方法、技巧、规律、是否、符合

### 4. 数字+单位组合
自动识别并高亮数字与单位的组合，例如：
- **252千米**
- **120千米/小时**
- **2小时**
- **13:00到15:00**

## 示例效果

### 原文：
```
首先确定行驶的总距离是252千米。
然后确定最高限速是120千米/小时。
使用公式：时间 = 距离 ÷ 速度，计算出理论上的最少行驶时间。
最后比较这个时间与实际行驶时间（从13:00到15:00）是否符合规定。
```

### 高亮后：
```
**首先**确定行驶的**总****距离**是**252千米**。
**然后**确定**最高****限速**是**120千米/小时**。
**使用****公式**：**时间** = **距离** ÷ **速度**，**计算**出理论上的**最**少行驶**时间**。
**最后****比较**这个**时间**与实际行驶**时间**（从13:00到15:00）**是否****符合**规定。
```

## 技术实现

### 文件结构
```
src/
├── utils/
│   └── textHighlight.js       # 关键词高亮工具函数
└── components/
    └── business/
        └── ChatInterface.jsx  # 使用高亮功能的聊天界面
```

### 核心函数
```javascript
// src/utils/textHighlight.js
export const highlightKeywords = (text) => {
    // 1. 先高亮数字+单位组合
    // 2. 再高亮其他关键词
    // 3. 避免重复替换
    return processedText;
};
```

### 使用方式
```javascript
import { highlightKeywords } from '../../utils/textHighlight';

// 在显示 AI 消息时应用
<ReactMarkdown>
    {msg.type === 'ai' ? highlightKeywords(msg.text) : msg.text}
</ReactMarkdown>
```

## 优势

✅ **提升可读性**：重点词汇一目了然  
✅ **加快理解**：学生能快速抓住核心概念  
✅ **自动化**：无需手动标记，AI 回复自动高亮  
✅ **智能识别**：支持数字+单位、数学术语、逻辑词等多种类型  
✅ **Markdown 兼容**：使用 `**` 加粗，与现有格式完美集成

## 扩展性

如需添加更多关键词，只需编辑 `src/utils/textHighlight.js` 中的 `keywords` 对象：

```javascript
const keywords = {
    math: ['新关键词1', '新关键词2', ...],
    actions: ['新动词1', '新动词2', ...],
    concepts: ['新概念1', '新概念2', ...],
};
```

## 注意事项

1. **避免过度高亮**：只高亮真正重要的词汇
2. **保护代码块**：如果文本包含 ``` 代码块，跳过处理
3. **避免重复**：使用负向断言避免重复替换已加粗的内容
4. **性能优化**：按词长降序排序，优先匹配长词

## 测试建议

1. 上传一道数学题，观察 AI 回复中的关键词是否被正确高亮
2. 检查数字+单位组合是否被识别（如 "120千米/小时"）
3. 验证逻辑连接词是否被高亮（如 "首先"、"然后"、"最后"）
4. 确认不会出现重复加粗的情况
