# 作业导出功能使用说明

## 功能概述

作业导出功能允许你将作业会话及其完整的对话记录导出为文件，方便保存、分享或备份。

## 使用步骤

### 1. 进入"我的作业"页面
从侧边栏导航到"我的作业"页面，查看所有作业会话。

### 2. 进入管理模式
点击右上角的"管理"按钮，进入选择模式。

### 3. 选择要导出的会话
- 单击会话前的复选框来选择单个会话
- 使用搜索栏上方的"全选"复选框来选择所有会话
- 可以选择一个或多个会话进行批量导出

### 4. 选择导出格式
点击"导出"按钮，会弹出格式选择菜单：

#### JSON 格式
- **适用场景**: 需要程序化处理数据、数据分析、备份
- **特点**: 结构化数据，包含完整的元数据
- **内容包括**:
  - 会话ID、标题、科目
  - 创建和更新时间
  - 完整的对话记录（包括分析、提示、引导）
  - 图片URL（如有）

#### Markdown 格式
- **适用场景**: 人类阅读、文档归档、打印
- **特点**: 易读的文档格式，支持富文本
- **内容包括**:
  - 会话基本信息
  - 格式化的对话记录
  - 时间戳
  - AI 的分析、提示和引导分段显示

### 5. 下载文件
选择格式后，文件会自动下载到你的默认下载文件夹。

## 导出文件命名规则

- **单个会话**: `{会话标题}_{会话ID前8位}_{时间戳}.{格式}`
- **批量导出**: 
  - JSON: `homework_batch_{数量}sessions_{时间戳}.json`
  - Markdown: 每个会话单独下载为独立文件

## 导出数据结构示例

### JSON 格式示例
```json
{
  "sessionId": "abc123...",
  "title": "数学作业 - 二次方程",
  "subject": "数学",
  "createdAt": "2026-01-11T10:30:00Z",
  "updatedAt": "2026-01-11T11:00:00Z",
  "totalMessages": 6,
  "conversation": [
    {
      "role": "user",
      "content": "请帮我解这道题",
      "timestamp": "2026-01-11T10:30:00Z",
      "imageUrl": "https://..."
    },
    {
      "role": "assistant",
      "content": {
        "analysis": "这是一道关于二次方程的题目...",
        "hint": "考虑使用求根公式...",
        "guidance": "首先，让我们识别方程的系数..."
      },
      "timestamp": "2026-01-11T10:31:00Z",
      "imageUrl": null
    }
  ]
}
```

### Markdown 格式示例
```markdown
# 数学作业 - 二次方程

**科目**: 数学  
**创建时间**: 2026-01-11 10:30:00  
**会话ID**: abc123...  
**消息数量**: 6  

---

## 👤 学生 - 2026-01-11 10:30:00

请帮我解这道题

![上传的图片](https://...)

---

## 🤖 AI导师 - 2026-01-11 10:31:00

### 📊 分析
这是一道关于二次方程的题目...

### 💡 提示
考虑使用求根公式...

### 🎯 引导
首先，让我们识别方程的系数...

---
```

## 注意事项

1. **图片链接**: 导出的文件包含图片的 URL 链接，不包含实际图片文件
2. **批量下载**: 批量导出 Markdown 时，浏览器可能会提示允许多个文件下载
3. **数据隐私**: 导出的文件包含完整对话记录，请妥善保管
4. **文件大小**: 对话记录较多的会话导出的文件可能较大

## 常见问题

**Q: 可以导出所有会话吗？**  
A: 可以，使用"全选"功能选择所有会话后导出。

**Q: 导出的图片能看到吗？**  
A: Markdown 格式中包含图片链接，如果图片 URL 仍然有效，可以在 Markdown 阅读器中查看。

**Q: 可以重新导入导出的数据吗？**  
A: 当前版本暂不支持导入功能，导出主要用于备份和归档。

**Q: 导出失败怎么办？**  
A: 请检查网络连接，确保有足够的存储空间，或尝试减少一次导出的会话数量。
