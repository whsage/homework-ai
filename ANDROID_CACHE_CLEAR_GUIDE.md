# Android WebView 缓存清除指南

## 问题描述
Android 端显示 `5 common.days` 而不是 `5d`，这是因为 WebView 缓存了旧版本的代码。

## 解决方案

### 方案一：在应用内清除缓存（推荐）

如果你的 Android 应用有清除缓存的功能，可以：

1. 打开应用设置
2. 找到"清除缓存"或"清除数据"选项
3. 点击清除
4. 重启应用

### 方案二：通过系统设置清除

1. 打开手机的**设置**
2. 进入**应用管理**或**应用**
3. 找到你的作业辅导应用
4. 点击**存储**或**存储空间**
5. 点击**清除缓存**（注意：不要点"清除数据"，那会删除登录信息）
6. 重新打开应用

### 方案三：强制刷新（临时方案）

在 Android 应用中，如果有下拉刷新功能：
1. 在主页向下拉动
2. 触发刷新
3. 等待页面重新加载

### 方案四：卸载重装（终极方案）

如果以上方法都不行：
1. 卸载应用
2. 重新安装最新版本
3. 重新登录

## 代码已修复确认

当前 Web 端代码（`src/pages/Dashboard.jsx` 第172行）：
```jsx
value={`${stats.streak}d`}
```

这是正确的代码，会显示 `7d` 而不是 `common.days`。

## 预防措施

为了避免将来出现类似问题，建议在 Android 应用中添加：

### 1. 版本号检测
在应用启动时检查 Web 版本号，如果不匹配则自动清除缓存。

### 2. 强制刷新按钮
在设置页面添加"强制刷新"按钮，方便用户手动清除缓存。

### 3. 禁用缓存（开发阶段）
在 `MainActivity.kt` 中添加：
```kotlin
webView.settings.cacheMode = WebSettings.LOAD_NO_CACHE
```

**注意：** 生产环境不建议完全禁用缓存，会影响性能。

## 验证修复

清除缓存后，活跃天数应该显示为：
- ✅ `7d`（正确）
- ❌ `7 common.days`（错误，说明缓存未清除）

## 技术说明

Android WebView 会缓存以下内容：
- HTML/CSS/JavaScript 文件
- 图片和其他静态资源
- LocalStorage 数据

清除缓存会删除这些缓存文件，但不会删除：
- 用户登录状态（存储在 Supabase）
- 用户数据
- 应用设置
